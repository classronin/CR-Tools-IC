
此节点是借用 [ComfyUI-Inpaint-CropAndStitch
](https://github.com/lquesada/ComfyUI-Inpaint-CropAndStitch) 的参数改造个人使用效率。

---


内置自动处理选择以下预设尺寸以便适配SD模型
320x704 (竖5:11)
384x640 (竖5:8)
448x576 (竖7:9)
512x512 (方1:1)
576x448 (横9:7)
640x384 (横8:5)
704x320 (横11:5)


---

裁剪节点 和 拼接节点 缩放算法选择分析
这两个节点的缩放算法选择确实会影响最终结果，它们可以相同也可以不同，各有优劣：

相同缩放算法的优缺点
优点：
一致性：使用相同算法确保缩放过程的一致性，减少因算法差异引入的伪影
可预测性：结果更加可预测，便于调试和优化工作流
简化选择：用户不需要考虑两个节点间的算法匹配问题

缺点：
可能不是最优：裁剪和缝合阶段的最优算法可能不同
灵活性低：无法针对不同阶段的特点选择最适合的算法

不同缩放算法的优缺点
优点：
阶段优化：可以为每个阶段选择最适合的算法
裁剪阶段：可能需要高质量上采样（如Lanczos）
缝合阶段：可能需要平滑过渡（如Bicubic）
性能平衡：可以在质量和速度之间找到最佳平衡

缺点：
不一致风险：不同算法可能引入不匹配的伪影
复杂度增加：需要用户理解不同算法的特性并做出合理选择

推荐策略
对于大多数用户：
建议使用相同的算法，特别是选择"Bicubic-双三次插值-中等"作为默认值，因为：
它在质量和速度之间提供了良好的平衡
减少了因算法不匹配导致的问题
简化了工作流配置

对于高级用户：
可以根据具体需求选择不同算法：
质量优先：裁剪使用Lanczos，缝合使用Bicubic
速度优先：裁剪使用Bilinear，缝合使用Bilinear
内存受限：两个阶段都使用Nearest

算法选择指南
算法	适合裁剪阶段	适合缝合阶段	说明
Nearest	⭐	⭐	最快但质量最差，适合预览
Bilinear	⭐⭐	⭐⭐⭐	较快，缝合阶段效果不错
Bicubic	⭐⭐⭐⭐	⭐⭐⭐⭐	平衡选择，两个阶段都适用
Bislerp	⭐⭐⭐	⭐⭐⭐	较慢，但能保持细节
Lanczos	⭐⭐⭐⭐⭐	⭐⭐	裁剪阶段最佳质量，缝合阶段可能过度锐化
Box	⭐⭐	⭐⭐⭐	区域平均，适合平滑过渡
Hamming	⭐⭐⭐	⭐⭐⭐	中等质量，减少振铃效应



关于四个参数的益处，按节点上的默认值来看：

填充遮罩孔洞 (默认: True)：
益处：自动填充遮罩中的小孔洞和间隙，确保修复区域是连续的
效果：避免修复后出现未处理的斑点或间隙，提高修复质量

模糊遮罩像素 (默认: 16.0)：
益处：对遮罩边缘进行模糊处理，创建平滑过渡
效果：使修复区域与周围图像的过渡更加自然，避免明显的硬边缘

混合像素 (默认: 16.0)：
益处：控制修复区域与原始图像的混合程度
效果：确保修复后的图像与原始图像无缝融合，减少不自然的过渡

输出填充 (默认: 32)：
益处：确保输出尺寸是特定值的倍数（这里是32）
效果：提高与某些AI模型的兼容性，许多模型要求输入尺寸是特定值的倍数

这些参数的默认值经过优化，适用于大多数修复场景，但根据具体图像和修复需求，您可以适当调整这些值以获得最佳效果。


